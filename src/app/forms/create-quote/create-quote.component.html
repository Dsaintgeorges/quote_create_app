<div>
  <form [formGroup]="createQuoteFormGroup" (submit)="validate()">
    <div class="client">
      <h2 style="text-align: center">Client</h2>
      <span>
        <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Nom & Prénom</mat-label>
      <input matInput type="text" formControlName="client">
    </mat-form-field>
    </span>
      <span>
        <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Rue</mat-label>
      <input matInput type="text" formControlName="adressRoad">
    </mat-form-field>
    </span>
      <span>
        <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Numéro</mat-label>
      <input type="text" formControlName="adressNumber" matInput>
    </mat-form-field>
    </span>
      <span>
        <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Code postal</mat-label>
      <input matInput type="number" min="1000" max="9999"
             (keypress)="($event.charCode >= 48 && $event.charCode < 58)"
             formControlName="postalCode">
    </mat-form-field>
    </span>
      <span>
       <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Ville</mat-label>
       <input matInput type="text" formControlName="city">
       </mat-form-field>
    </span>
      <span>
          <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Téléphone</mat-label>
        <input matInput type="text" formControlName="phone">
          </mat-form-field>
      </span>
    </div>
    <div class="lines">
      <h2 style="text-align: center">lines</h2>
      <div formArrayName="lines">
        <div *ngFor="let line of data.linesArray;let i = index">
          <div [formGroupName]="i">
            <span>
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Réference produit</mat-label>
                  <input matInput type="text" formControlName="reference">
                </mat-form-field>
            </span>
            <span>
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Description</mat-label>
                  <input matInput type="text" formControlName="description">
                </mat-form-field>
            </span>
            <span>
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Prix unitaire</mat-label>
                  <input matInput type="number" formControlName="unitPrice"
                         (keypress)="($event.charCode >= 48 && $event.charCode < 58)"
                         (change)="calculateTotalLine(i)">
                </mat-form-field>
            </span>
            <span>
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Promo</mat-label>
                  <input matInput type="number" formControlName="promo" (keypress)="($event.charCode >= 48 && $event.charCode < 58)">
                </mat-form-field>
            </span>
            <span>
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Quantité</mat-label>
                  <input matInput type="number" formControlName="quantity"
                        (keypress)="($event.charCode >= 48 && $event.charCode < 58)"
                        (change)="calculateTotalLine(i)">
                </mat-form-field>
            </span>
            <span>
              <p type="text"> Total : {{createQuoteFormGroup.value?.lines[i].total}}</p>
            </span>
            <span>
              <a (click)="deleteQuoteLine(i)">
              <mat-icon>delete</mat-icon>
                </a>
            </span>
          </div>
        </div>
      </div>
      <span>
         <button class="btn btn-info" type="button" (click)="addLine()">Ajouter une ligne</button>
      </span>
    </div>
    <button class="btn btn-info" type="submit" [disabled]="!data.linesArray.length"> envoyer</button>


  </form>
</div>
